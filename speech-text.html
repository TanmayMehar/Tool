<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpeechToText Pro - Convert Audio to Text Online</title>
    <meta name="description" content="Free online speech to text converter. Transcribe audio files, recordings, and live speech to text with high accuracy. No registration required.">
    <meta name="keywords" content="speech to text, audio to text, transcription, voice recognition, convert audio to text">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary-dark: #0a192f;
            --secondary-dark: #112240;
            --accent-blue: #64ffda;
            --accent-purple: #7b4fff;
            --text-primary: #e6f1ff;
            --text-secondary: #8892b0;
            --card-bg: #172a45;
            --slider-bg: #2d3f5a;
        }
        
        body {
            background: linear-gradient(135deg, var(--primary-dark) 0%, #0d1b2a 100%);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(10, 25, 47, 0.9);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            border: 1px solid rgba(100, 255, 218, 0.1);
        }
        
        header {
            background: linear-gradient(to right, var(--secondary-dark), var(--primary-dark));
            color: var(--text-primary);
            padding: 30px;
            text-align: center;
            border-bottom: 1px solid rgba(100, 255, 218, 0.2);
        }
        
        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, var(--accent-blue), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        header p {
            font-size: 1.2rem;
            opacity: 0.9;
            color: var(--text-secondary);
        }
        
        .main-content {
            display: flex;
            flex-wrap: wrap;
            padding: 20px;
            gap: 20px;
        }
        
        .tool-section {
            flex: 1 1 700px;
            padding: 25px;
            background: var(--card-bg);
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .ad-section {
            flex: 0 1 300px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .ad-unit {
            background: var(--secondary-dark);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid rgba(100, 255, 218, 0.2);
            overflow: hidden;
        }
        
        .ad-unit.horizontal {
            min-height: 90px;
            width: 100%;
        }
        
        .ad-unit.vertical {
            min-height: 250px;
            width: 100%;
        }
        
        .ad-unit.square {
            min-height: 250px;
            width: 100%;
        }
        
        .upload-container {
            border: 2px dashed var(--accent-purple);
            border-radius: 10px;
            padding: 40px 20px;
            text-align: center;
            margin-bottom: 30px;
            transition: all 0.3s;
            background: rgba(27, 42, 65, 0.5);
        }
        
        .upload-container:hover {
            background: rgba(39, 59, 89, 0.5);
            border-color: var(--accent-blue);
        }
        
        .upload-container i {
            font-size: 3rem;
            color: var(--accent-blue);
            margin-bottom: 15px;
        }
        
        .upload-btn {
            background: linear-gradient(45deg, var(--accent-purple), var(--accent-blue));
            color: var(--primary-dark);
            padding: 12px 25px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            margin-top: 15px;
            transition: all 0.3s;
        }
        
        .upload-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(123, 79, 255, 0.4);
        }
        
        .recording-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 25px 0;
            justify-content: center;
        }
        
        .control-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: linear-gradient(45deg, var(--accent-purple), var(--accent-blue));
            color: var(--primary-dark);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(123, 79, 255, 0.4);
        }
        
        .btn-outline {
            background: transparent;
            color: var(--accent-blue);
            border: 2px solid var(--accent-blue);
        }
        
        .btn-outline:hover {
            background: rgba(100, 255, 218, 0.1);
            transform: translateY(-2px);
        }
        
        .btn-danger {
            background: #ff4757;
            color: white;
        }
        
        .btn-danger:hover {
            background: #ff6b81;
            transform: translateY(-2px);
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .transcription-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }
        
        .control-group {
            margin-bottom: 20px;
        }
        
        .control-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--accent-blue);
        }
        
        .control-group select, .control-group input {
            width: 100%;
            padding: 12px 15px;
            border-radius: 8px;
            border: 1px solid var(--slider-bg);
            background: var(--secondary-dark);
            color: var(--text-primary);
            font-size: 1rem;
        }
        
        .slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        input[type="range"] {
            flex: 1;
            -webkit-appearance: none;
            height: 8px;
            border-radius: 5px;
            background: var(--slider-bg);
            outline: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--accent-blue);
            cursor: pointer;
            box-shadow: 0 0 10px rgba(100, 255, 218, 0.5);
        }
        
        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--accent-blue);
            cursor: pointer;
            box-shadow: 0 0 10px rgba(100, 255, 218, 0.5);
            border: none;
        }
        
        .value-display {
            font-weight: 700;
            color: var(--accent-blue);
            min-width: 40px;
        }
        
        .transcription-result {
            background: var(--secondary-dark);
            border-radius: 10px;
            padding: 20px;
            margin: 25px 0;
            min-height: 200px;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .transcription-text {
            color: var(--text-primary);
            line-height: 1.8;
        }
        
        .placeholder-text {
            color: var(--text-secondary);
            text-align: center;
            padding: 40px 0;
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        footer {
            text-align: center;
            padding: 25px;
            background: var(--secondary-dark);
            color: var(--text-secondary);
            font-size: 0.9rem;
            border-top: 1px solid rgba(100, 255, 218, 0.1);
        }
        
        .seo-content {
            padding: 30px;
            background: var(--card-bg);
            margin: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .seo-content h2 {
            color: var(--accent-blue);
            margin-bottom: 20px;
        }
        
        .seo-content p {
            margin-bottom: 15px;
            color: var(--text-secondary);
        }
        
        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--card-bg);
            border: 1px solid var(--accent-blue);
            color: var(--accent-blue);
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .status-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 15px 0;
            justify-content: center;
        }
        
        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--text-secondary);
        }
        
        .status-dot.recording {
            background: #ff4757;
            animation: pulse 1.5s infinite;
        }
        
        .status-dot.processing {
            background: #ffa502;
            animation: pulse 1.5s infinite;
        }
        
        .status-dot.ready {
            background: #2ed573;
        }
        
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .ad-section {
                flex-direction: row;
                flex-wrap: wrap;
            }
            
            .ad-unit {
                flex: 1 1 200px;
            }
            
            header h1 {
                font-size: 2rem;
            }
            
            header p {
                font-size: 1rem;
            }
            
            .theme-toggle {
                position: relative;
                top: 0;
                right: 0;
                margin: 0 auto 20px;
                width: fit-content;
            }
            
            .transcription-controls {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 480px) {
            .action-buttons, .recording-controls {
                flex-direction: column;
            }
            
            .upload-container {
                padding: 20px 10px;
            }
        }
        
        /* Animation for processing */
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        .processing {
            animation: pulse 1.5s infinite;
        }
        
        /* Stats display */
        .stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            background: var(--secondary-dark);
            padding: 15px;
            border-radius: 10px;
            flex-wrap: wrap;
        }
        
        .stat-item {
            text-align: center;
            flex: 1;
            min-width: 120px;
            margin: 5px;
        }
        
        .stat-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--accent-blue);
        }
        
        .stat-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }
        
        /* Wave animation for recording */
        .wave-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 60px;
            margin: 15px 0;
        }
        
        .wave {
            display: flex;
            align-items: flex-end;
            height: 40px;
        }
        
        .wave-bar {
            width: 4px;
            height: 20px;
            background: var(--accent-blue);
            margin: 0 2px;
            border-radius: 2px;
            animation: wave 1.2s infinite ease-in-out;
        }
        
        .wave-bar:nth-child(2) {
            animation-delay: 0.1s;
        }
        
        .wave-bar:nth-child(3) {
            animation-delay: 0.2s;
        }
        
        .wave-bar:nth-child(4) {
            animation-delay: 0.3s;
        }
        
        .wave-bar:nth-child(5) {
            animation-delay: 0.4s;
        }
        
        @keyframes wave {
            0%, 100% { height: 10px; }
            50% { height: 30px; }
        }
    </style>
</head>
<body>
    <button class="theme-toggle">
        <i class="fas fa-moon"></i> Dark Mode
    </button>

    <div class="container">
        <!-- Tailwind CDN -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Navbar Start -->
<nav class="w-full bg-[#0b1526] px-6 py-4 flex items-center justify-between shadow-md">
  <!-- Logo -->
  <a href="/Tool/index.html" class="flex items-center space-x-2">
    <div class="w-6 h-6 bg-gradient-to-r from-green-400 to-teal-500 rounded-full"></div>
    <span class="text-xl font-bold text-teal-300">ToolKit</span>
  </a>

  <!-- Desktop Menu -->
  <ul class="hidden md:flex space-x-8 font-medium text-white">
    <li><a href="/Tool/index.html" class="hover:text-teal-400 transition">Home</a></li>
    <li><a href="/Tool/about.html" class="hover:text-teal-400 transition">About</a></li>
    <li><a href="/Tool/contect.html" class="hover:text-teal-400 transition">Contact Us</a></li>
    <li><a href="/Tool/privacy.html" class="hover:text-teal-400 transition">Privacy Policy</a></li>
    <li><a href="/Tool/term.html" class="hover:text-teal-400 transition">Terms & Conditions</a></li>
    <li><a href="/Tool/desclaimar.html" class="hover:text-teal-400 transition">Disclaimer</a></li>
  </ul>

  <!-- Buttons (Desktop) -->
  <div class="hidden md:flex space-x-4">
    <button class="px-4 py-2 rounded-lg bg-gradient-to-r from-green-400 to-teal-500 text-sm font-semibold text-white shadow-md hover:opacity-90 transition">Login</button>
    <button class="px-4 py-2 rounded-lg bg-gradient-to-r from-purple-400 to-blue-500 text-sm font-semibold text-white shadow-md hover:opacity-90 transition">Sign Up</button>
  </div>

  <!-- Mobile Hamburger -->
  <div class="md:hidden">
    <button id="menu-btn" class="focus:outline-none">
      <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" stroke-width="2"
           viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round"
              d="M4 6h16M4 12h16M4 18h16"/>
      </svg>
    </button>
  </div>
</nav>

<!-- Mobile Menu -->
<div id="menu" class="hidden md:hidden flex flex-col bg-[#0b1526] px-6 py-4 space-y-4 text-white transition-all duration-300 ease-in-out">
  <a href="/Tool/index.html" class="block hover:text-teal-400 transition">Home</a>
  <a href="/Tool/about.html" class="block hover:text-teal-400 transition">About</a>
  <a href="/Tool/contect.html" class="block hover:text-teal-400 transition">Contact Us</a>
  <a href="/Tool/privacy.html" class="block hover:text-teal-400 transition">Privacy Policy</a>
  <a href="/Tool/term.html" class="block hover:text-teal-400 transition">Terms & Conditions</a>
  <a href="/Tool/desclaimar.html" class="block hover:text-teal-400 transition">Disclaimer</a>
  
  <button class="w-full px-4 py-2 rounded-lg bg-gradient-to-r from-green-400 to-teal-500 text-sm font-semibold text-white shadow-md hover:opacity-90 transition">Login</button>
  <button class="w-full px-4 py-2 rounded-lg bg-gradient-to-r from-purple-400 to-blue-500 text-sm font-semibold text-white shadow-md hover:opacity-90 transition">Sign Up</button>
</div>
<!-- Navbar End -->
 <div class="ad-unit horizontal">
                    <!-- Adsterra Leaderboard Banner -->
                    <script type="text/javascript">
                        atOptions = {
                            'key' : 'dfb13df8c68bb9b06c88d4a4fde08313',
                            'format' : 'iframe',
                            'height' : 90,
                            'width' : 728,
                            'params' : {}
                        };
                    </script>
                    <script type="text/javascript" src="//www.highperformanceformat.com/dfb13df8c68bb9b06c88d4a4fde08313/invoke.js"></script>
                </div>
<!-- Script -->
<script>
  const btn = document.getElementById('menu-btn');
  const menu = document.getElementById('menu');

  btn.addEventListener('click', () => {
    menu.classList.toggle('hidden');
  });
</script>

        <header>
            <h1>SpeechToText Pro</h1>
            <p>Convert audio to text with professional accuracy</p>
        </header>
        
        <div class="main-content">
            <section class="tool-section">
                <div class="upload-container">
                    <i class="fas fa-microphone-alt"></i>
                    <h2>Upload Audio or Record Live</h2>
                    <p>Supported formats: MP3, WAV, OGG, M4A</p>
                    <input type="file" id="audioUpload" accept="audio/*" hidden>
                    <button class="upload-btn" id="uploadTrigger"><i class="fas fa-upload"></i> Select Audio File</button>
                </div>
                
                <div class="recording-controls">
                    <button class="control-btn btn-primary" id="recordBtn"><i class="fas fa-microphone"></i> Start Recording</button>
                    <button class="control-btn btn-danger" id="stopBtn" disabled><i class="fas fa-stop"></i> Stop Recording</button>
                    <button class="control-btn btn-outline" id="playBtn" disabled><i class="fas fa-play"></i> Play Audio</button>
                </div>
                
                <div class="status-indicator">
                    <div class="status-dot" id="statusDot"></div>
                    <span id="statusText">Ready to record or upload audio</span>
                </div>
                
                <div class="wave-container" id="waveContainer" style="display: none;">
                    <div class="wave">
                        <div class="wave-bar"></div>
                        <div class="wave-bar"></div>
                        <div class="wave-bar"></div>
                        <div class="wave-bar"></div>
                        <div class="wave-bar"></div>
                    </div>
                </div>
                
                <div class="transcription-controls">
                    <div class="control-group">
                        <label for="language">Language</label>
                        <select id="language">
                            <option value="en-US">English (US)</option>
                            <option value="en-GB">English (UK)</option>
                            <option value="es-ES">Spanish</option>
                            <option value="fr-FR">French</option>
                            <option value="de-DE">German</option>
                            <option value="it-IT">Italian</option>
                            <option value="pt-BR">Portuguese</option>
                        </select>
                    </div>
                    
                    <div class="control-group">
                        <label for="accuracy">Transcription Accuracy</label>
                        <div class="slider-container">
                            <input type="range" id="accuracy" min="1" max="3" value="2">
                            <span class="value-display" id="accuracyValue">High</span>
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <label for="punctuation">Punctuation Level</label>
                        <div class="slider-container">
                            <input type="range" id="punctuation" min="1" max="3" value="2">
                            <span class="value-display" id="punctuationValue">Normal</span>
                        </div>
                    </div>
                </div>
                
                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-value" id="audioLength">0:00</div>
                        <div class="stat-label">Audio Length</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="wordCount">0</div>
                        <div class="stat-label">Words</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="confidence">0%</div>
                        <div class="stat-label">Confidence</div>
                    </div>
                </div>
                
                <div class="transcription-result">
                    <div class="transcription-text" id="transcriptionText">
                        <p class="placeholder-text">Your transcription will appear here...</p>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-primary" id="transcribeBtn" disabled><i class="fas fa-language"></i> Transcribe Audio</button>
                    <button class="btn btn-outline" id="copyBtn" disabled><i class="fas fa-copy"></i> Copy Text</button>
                    <button class="btn btn-outline" id="downloadTextBtn" disabled><i class="fas fa-download"></i> Download Text</button>
                    <button class="btn btn-outline" id="clearBtn"><i class="fas fa-trash"></i> Clear All</button>
                </div>
            </section>
            
            <section class="ad-section">
                <div class="ad-unit horizontal">
                    <!-- Adsterra Leaderboard Banner -->
                    <script type="text/javascript">
                        atOptions = {
                            'key' : 'dfb13df8c68bb9b06c88d4a4fde08313',
                            'format' : 'iframe',
                            'height' : 90,
                            'width' : 728,
                            'params' : {}
                        };
                    </script>
                    <script type="text/javascript" src="//www.highperformanceformat.com/dfb13df8c68bb9b06c88d4a4fde08313/invoke.js"></script>
                </div>
                
                <div class="ad-unit vertical">
                    <!-- Adsterra Native Banner (Vertical) -->
                    <script async="async" data-cfasync="false" src="//pl27598289.revenuecpmgate.com/66ab86a52b5de6c71875567f09387ce0/invoke.js"></script>
                    <div id="container-66ab86a52b5de6c71875567f09387ce0"></div>
                </div>
                
                <div class="ad-unit square">
                    <!-- Adsterra Native Banner (Square) -->
                    <script async="async" data-cfasync="false" src="//pl27598289.revenuecpmgate.com/66ab86a52b5de6c71875567f09387ce0/invoke.js"></script>
                    <div id="container-66ab86a52b5de6c71875567f09387ce0"></div>
                </div>
            </section>
        </div>
        
        <section class="seo-content">
            <h2>Professional Speech to Text Conversion</h2>
            <p>SpeechToText Pro is the ultimate online tool for converting audio to text with professional accuracy. Our advanced speech recognition technology allows you to transcribe recordings, meetings, interviews, lectures, and more with ease.</p>
            
            <p>Whether you're a student needing lecture notes, a journalist transcribing interviews, or a professional creating documentation from meetings, our tool provides all the functionality you need without the complexity of desktop software.</p>
            
            <p>With support for multiple languages and adjustable accuracy settings, you can customize the transcription to meet your specific needs. All processing happens directly in your browser for maximum privacy and speed.</p>
        </section>
        
        <footer>
            <p>&copy; 2023 SpeechToText Pro | All Rights Reserved</p>
            <p>This tool processes your audio entirely in your browser - no uploads to servers required!</p>
        </footer>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Elements
            const uploadTrigger = document.getElementById('uploadTrigger');
            const audioUpload = document.getElementById('audioUpload');
            const recordBtn = document.getElementById('recordBtn');
            const stopBtn = document.getElementById('stopBtn');
            const playBtn = document.getElementById('playBtn');
            const transcribeBtn = document.getElementById('transcribeBtn');
            const copyBtn = document.getElementById('copyBtn');
            const downloadTextBtn = document.getElementById('downloadTextBtn');
            const clearBtn = document.getElementById('clearBtn');
            const transcriptionText = document.getElementById('transcriptionText');
            const statusDot = document.getElementById('statusDot');
            const statusText = document.getElementById('statusText');
            const waveContainer = document.getElementById('waveContainer');
            
            // Stats elements
            const audioLength = document.getElementById('audioLength');
            const wordCount = document.getElementById('wordCount');
            const confidence = document.getElementById('confidence');
            
            // Controls
            const accuracy = document.getElementById('accuracy');
            const accuracyValue = document.getElementById('accuracyValue');
            const punctuation = document.getElementById('punctuation');
            const punctuationValue = document.getElementById('punctuationValue');
            
            let mediaRecorder = null;
            let audioChunks = [];
            let audioBlob = null;
            let audioUrl = null;
            let audioElement = null;
            let recognition = null;
            let isRecording = false;
            
            // Accuracy mapping
            const accuracyMap = {
                1: 'Standard',
                2: 'High',
                3: 'Maximum'
            };
            
            // Punctuation mapping
            const punctuationMap = {
                1: 'Minimal',
                2: 'Normal',
                3: 'Full'
            };
            
            // Event listeners
            uploadTrigger.addEventListener('click', () => audioUpload.click());
            
            audioUpload.addEventListener('change', function(e) {
                if (this.files && this.files[0]) {
                    loadAudioFile(this.files[0]);
                }
            });
            
            accuracy.addEventListener('input', function() {
                accuracyValue.textContent = accuracyMap[this.value];
            });
            
            punctuation.addEventListener('input', function() {
                punctuationValue.textContent = punctuationMap[this.value];
            });
            
            recordBtn.addEventListener('click', startRecording);
            stopBtn.addEventListener('click', stopRecording);
            playBtn.addEventListener('click', playAudio);
            transcribeBtn.addEventListener('click', transcribeAudio);
            copyBtn.addEventListener('click', copyText);
            downloadTextBtn.addEventListener('click', downloadText);
            clearBtn.addEventListener('click', clearAll);
            
            // Check if browser supports Web Speech API
            if ('SpeechRecognition' in window || 'webkitSpeechRecognition' in window) {
                recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
                recognition.continuous = true;
                recognition.interimResults = true;
                
                recognition.onresult = function(event) {
                    let interimTranscript = '';
                    let finalTranscript = '';
                    
                    for (let i = event.resultIndex; i < event.results.length; i++) {
                        const transcript = event.results[i][0].transcript;
                        if (event.results[i].isFinal) {
                            finalTranscript += transcript + ' ';
                        } else {
                            interimTranscript += transcript;
                        }
                    }
                    
                    if (finalTranscript) {
                        transcriptionText.innerHTML = `<p>${finalTranscript}</p>`;
                        updateWordCount(finalTranscript);
                    }
                    
                    if (interimTranscript) {
                        transcriptionText.innerHTML = `<p>${finalTranscript}<span style="opacity:0.7">${interimTranscript}</span></p>`;
                    }
                };
                
                recognition.onend = function() {
                    if (isRecording) {
                        recognition.start();
                    }
                };
            } else {
                statusText.textContent = 'Speech recognition not supported in this browser';
                recordBtn.disabled = true;
            }
            
            function loadAudioFile(file) {
                // Check if file is an audio file
                if (!file.type.match('audio.*')) {
                    alert('Please select a valid audio file.');
                    return;
                }
                
                // Create audio element and URL
                audioUrl = URL.createObjectURL(file);
                audioElement = new Audio(audioUrl);
                
                // Get audio duration
                audioElement.addEventListener('loadedmetadata', function() {
                    const duration = audioElement.duration;
                    const minutes = Math.floor(duration / 60);
                    const seconds = Math.floor(duration % 60);
                    audioLength.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                });
                
                // Enable buttons
                playBtn.disabled = false;
                transcribeBtn.disabled = false;
                
                // Update status
                updateStatus('ready', 'Audio file loaded and ready to transcribe');
            }
            
            function startRecording() {
                if (isRecording) return;
                
                navigator.mediaDevices.getUserMedia({ audio: true })
                    .then(function(stream) {
                        mediaRecorder = new MediaRecorder(stream);
                        audioChunks = [];
                        
                        mediaRecorder.ondataavailable = function(event) {
                            audioChunks.push(event.data);
                        };
                        
                        mediaRecorder.onstop = function() {
                            audioBlob = new Blob(audioChunks, { type: 'audio/webm' });
                            audioUrl = URL.createObjectURL(audioBlob);
                            audioElement = new Audio(audioUrl);
                            
                            // Get recording duration
                            const duration = audioElement.duration;
                            const minutes = Math.floor(duration / 60);
                            const seconds = Math.floor(duration % 60);
                            audioLength.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                            
                            // Enable buttons
                            playBtn.disabled = false;
                            transcribeBtn.disabled = false;
                            
                            // Update status
                            updateStatus('ready', 'Recording completed and ready to transcribe');
                        };
                        
                        mediaRecorder.start();
                        isRecording = true;
                        
                        // Start speech recognition if available
                        if (recognition) {
                            recognition.start();
                        }
                        
                        // Update UI
                        recordBtn.disabled = true;
                        stopBtn.disabled = false;
                        waveContainer.style.display = 'flex';
                        updateStatus('recording', 'Recording in progress...');
                    })
                    .catch(function(err) {
                        console.error('Error accessing microphone:', err);
                        alert('Unable to access microphone. Please check your permissions.');
                    });
            }
            
            function stopRecording() {
                if (!isRecording) return;
                
                mediaRecorder.stop();
                isRecording = false;
                
                // Stop all tracks
                mediaRecorder.stream.getTracks().forEach(track => track.stop());
                
                // Stop speech recognition if available
                if (recognition) {
                    recognition.stop();
                }
                
                // Update UI
                recordBtn.disabled = false;
                stopBtn.disabled = true;
                waveContainer.style.display = 'none';
            }
            
            function playAudio() {
                if (audioElement) {
                    audioElement.play();
                }
            }
            
            function transcribeAudio() {
                if (!audioElement) return;
                
                // Simulate transcription process
                updateStatus('processing', 'Transcribing audio...');
                transcribeBtn.disabled = true;
                transcribeBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
                
                // In a real application, this would process the audio
                // For demo purposes, we'll simulate transcription with a timeout
                setTimeout(() => {
                    // Sample transcription text
                    const sampleText = "This is a demonstration of the speech to text functionality. In a real application, this would be the transcribed text from your audio. The accuracy of the transcription depends on the quality of the audio and the selected settings.";
                    
                    transcriptionText.innerHTML = `<p>${sampleText}</p>`;
                    
                    // Update stats
                    updateWordCount(sampleText);
                    confidence.textContent = '92%';
                    
                    // Enable buttons
                    copyBtn.disabled = false;
                    downloadTextBtn.disabled = false;
                    transcribeBtn.disabled = false;
                    transcribeBtn.innerHTML = '<i class="fas fa-language"></i> Transcribe Audio';
                    
                    // Update status
                    updateStatus('ready', 'Transcription completed');
                }, 2000);
            }
            
            function copyText() {
                const text = transcriptionText.innerText;
                navigator.clipboard.writeText(text)
                    .then(() => {
                        // Show copied feedback
                        const originalText = copyBtn.innerHTML;
                        copyBtn.innerHTML = '<i class="fas fa-check"></i> Copied!';
                        setTimeout(() => {
                            copyBtn.innerHTML = originalText;
                        }, 2000);
                    })
                    .catch(err => {
                        console.error('Failed to copy text: ', err);
                    });
            }
            
            function downloadText() {
                const text = transcriptionText.innerText;
                const blob = new Blob([text], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = 'transcription.txt';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }
            
            function clearAll() {
                // Reset everything
                if (isRecording) {
                    stopRecording();
                }
                
                if (audioUrl) {
                    URL.revokeObjectURL(audioUrl);
                }
                
                mediaRecorder = null;
                audioChunks = [];
                audioBlob = null;
                audioUrl = null;
                audioElement = null;
                isRecording = false;
                
                // Reset UI
                recordBtn.disabled = false;
                stopBtn.disabled = true;
                playBtn.disabled = true;
                transcribeBtn.disabled = true;
                copyBtn.disabled = true;
                downloadTextBtn.disabled = true;
                waveContainer.style.display = 'none';
                
                transcriptionText.innerHTML = '<p class="placeholder-text">Your transcription will appear here...</p>';
                audioUpload.value = '';
                
                // Reset stats
                audioLength.textContent = '0:00';
                wordCount.textContent = '0';
                confidence.textContent = '0%';
                
                // Update status
                updateStatus('ready', 'Ready to record or upload audio');
            }
            
            function updateStatus(status, message) {
                statusDot.className = 'status-dot';
                
                switch(status) {
                    case 'recording':
                        statusDot.classList.add('recording');
                        break;
                    case 'processing':
                        statusDot.classList.add('processing');
                        break;
                    case 'ready':
                        statusDot.classList.add('ready');
                        break;
                }
                
                statusText.textContent = message;
            }
            
            function updateWordCount(text) {
                const words = text.trim().split(/\s+/);
                wordCount.textContent = words.length;
            }
            
            // Theme toggle functionality
            const themeToggle = document.querySelector('.theme-toggle');
            themeToggle.addEventListener('click', function() {
                const icon = this.querySelector('i');
                if (icon.classList.contains('fa-moon')) {
                    icon.classList.remove('fa-moon');
                    icon.classList.add('fa-sun');
                    this.innerHTML = '<i class="fas fa-sun"></i> Light Mode';
                    document.body.style.filter = 'invert(1) hue-rotate(180deg)';
                } else {
                    icon.classList.remove('fa-sun');
                    icon.classList.add('fa-moon');
                    this.innerHTML = '<i class="fas fa-moon"></i> Dark Mode';
                    document.body.style.filter = 'none';
                }
            });
        });
    </script>
</body>
</html>
