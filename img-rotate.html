<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Rotator Pro - Rotate and Flip Images Online</title>
    <meta name="description" content="Free online tool to rotate and flip your images. Adjust rotation angle, apply flips, and optimize with compression settings.">
    <meta name="keywords" content="image rotator, rotate images, flip images, image editor, online image tool">
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-example"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary-dark: #0a192f;
            --secondary-dark: #112240;
            --accent-blue: #64ffda;
            --accent-purple: #7b4fff;
            --text-primary: #e6f1ff;
            --text-secondary: #8892b0;
            --card-bg: #172a45;
            --slider-bg: #2d3f5a;
        }
        
        body {
            background: linear-gradient(135deg, var(--primary-dark) 0%, #0d1b2a 100%);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(10, 25, 47, 0.9);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            border: 1px solid rgba(100, 255, 218, 0.1);
        }
        
        header {
            background: linear-gradient(to right, var(--secondary-dark), var(--primary-dark));
            color: var(--text-primary);
            padding: 30px;
            text-align: center;
            border-bottom: 1px solid rgba(100, 255, 218, 0.2);
        }
        
        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, var(--accent-blue), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        header p {
            font-size: 1.2rem;
            opacity: 0.9;
            color: var(--text-secondary);
        }
        
        .main-content {
            display: flex;
            flex-wrap: wrap;
            padding: 20px;
            gap: 20px;
        }
        
        .tool-section {
            flex: 1 1 700px;
            padding: 25px;
            background: var(--card-bg);
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .ad-section {
            flex: 0 1 300px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .ad-unit {
            background: var(--secondary-dark);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            min-height: 250px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid rgba(100, 255, 218, 0.2);
        }
        
        .ad-unit p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        .upload-container {
            border: 2px dashed var(--accent-purple);
            border-radius: 10px;
            padding: 40px 20px;
            text-align: center;
            margin-bottom: 30px;
            transition: all 0.3s;
            background: rgba(27, 42, 65, 0.5);
        }
        
        .upload-container:hover {
            background: rgba(39, 59, 89, 0.5);
            border-color: var(--accent-blue);
        }
        
        .upload-container i {
            font-size: 3rem;
            color: var(--accent-blue);
            margin-bottom: 15px;
        }
        
        .upload-btn {
            background: linear-gradient(45deg, var(--accent-purple), var(--accent-blue));
            color: var(--primary-dark);
            padding: 12px 25px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            margin-top: 15px;
            transition: all 0.3s;
        }
        
        .upload-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(123, 79, 255, 0.4);
        }
        
        .image-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin: 25px 0;
        }
        
        .image-box {
            flex: 1 1 300px;
            text-align: center;
            background: var(--secondary-dark);
            padding: 20px;
            border-radius: 10px;
        }
        
        .image-box h3 {
            margin-bottom: 15px;
            color: var(--accent-blue);
        }
        
        .preview-img {
            max-width: 100%;
            max-height: 300px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            margin-bottom: 10px;
            border: 1px solid rgba(100, 255, 218, 0.2);
            object-fit: contain;
            transition: transform 0.5s ease;
        }
        
        .file-info {
            background: var(--primary-dark);
            padding: 10px;
            border-radius: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        .controls {
            margin: 25px 0;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .control-group {
            margin-bottom: 20px;
        }
        
        .control-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--accent-blue);
        }
        
        .slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        input[type="range"] {
            flex: 1;
            -webkit-appearance: none;
            height: 8px;
            border-radius: 5px;
            background: var(--slider-bg);
            outline: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--accent-blue);
            cursor: pointer;
            box-shadow: 0 0 10px rgba(100, 255, 218, 0.5);
        }
        
        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--accent-blue);
            cursor: pointer;
            box-shadow: 0 0 10px rgba(100, 255, 218, 0.5);
            border: none;
        }
        
        select {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            background: var(--slider-bg);
            color: var(--text-primary);
            border: 1px solid rgba(100, 255, 218, 0.2);
        }
        
        .compression-value {
            font-weight: 700;
            color: var(--accent-blue);
            min-width: 40px;
        }
        
        .rotation-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }
        
        .rotation-btn {
            padding: 12px;
            background: var(--secondary-dark);
            color: var(--text-primary);
            border: 1px solid rgba(100, 255, 218, 0.2);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .rotation-btn:hover {
            background: rgba(100, 255, 218, 0.1);
        }
        
        .rotation-btn.active {
            background: linear-gradient(45deg, var(--accent-purple), var(--accent-blue));
            color: var(--primary-dark);
            border-color: transparent;
        }
        
        .flip-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }
        
        .flip-btn {
            padding: 12px;
            background: var(--secondary-dark);
            color: var(--text-primary);
            border: 1px solid rgba(100, 255, 218, 0.2);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .flip-btn:hover {
            background: rgba(100, 255, 218, 0.1);
        }
        
        .flip-btn.active {
            background: linear-gradient(45deg, var(--accent-purple), var(--accent-blue));
            color: var(--primary-dark);
            border-color: transparent;
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: linear-gradient(45deg, var(--accent-purple), var(--accent-blue));
            color: var(--primary-dark);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(123, 79, 255, 0.4);
        }
        
        .btn-outline {
            background: transparent;
            color: var(--accent-blue);
            border: 2px solid var(--accent-blue);
        }
        
        .btn-outline:hover {
            background: rgba(100, 255, 218, 0.1);
            transform: translateY(-2px);
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        footer {
            text-align: center;
            padding: 25px;
            background: var(--secondary-dark);
            color: var(--text-secondary);
            font-size: 0.9rem;
            border-top: 1px solid rgba(100, 255, 218, 0.1);
        }
        
        .seo-content {
            padding: 30px;
            background: var(--card-bg);
            margin: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .seo-content h2 {
            color: var(--accent-blue);
            margin-bottom: 20px;
        }
        
        .seo-content p {
            margin-bottom: 15px;
            color: var(--text-secondary);
        }
        
        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--card-bg);
            border: 1px solid var(--accent-blue);
            color: var(--accent-blue);
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .ad-section {
                flex-direction: row;
                flex-wrap: wrap;
            }
            
            .ad-unit {
                flex: 1 1 200px;
            }
            
            header h1 {
                font-size: 2rem;
            }
            
            header p {
                font-size: 1rem;
            }
            
            .theme-toggle {
                position: relative;
                top: 0;
                right: 0;
                margin: 0 auto 20px;
                width: fit-content;
            }
            
            .controls {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 480px) {
            .action-buttons {
                flex-direction: column;
            }
            
            .image-container {
                flex-direction: column;
            }
            
            .upload-container {
                padding: 20px 10px;
            }
            
            .rotation-buttons, .flip-buttons {
                grid-template-columns: 1fr;
            }
        }
        
        /* Animation for processing */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .processing {
            animation: pulse 1.5s infinite;
        }
        
        /* Progress bar */
        .progress-container {
            width: 100%;
            height: 8px;
            background: var(--slider-bg);
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
            display: none;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-purple), var(--accent-blue));
            border-radius: 4px;
            width: 0%;
            transition: width 0.3s ease;
        }
        
        /* Format badges */
        .format-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            background: rgba(123, 79, 255, 0.2);
            color: var(--accent-purple);
            font-size: 0.8rem;
            margin: 5px;
        }
        
        .size-comparison {
            display: flex;
            justify-content: space-around;
            background: var(--secondary-dark);
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
        }
        
        .size-item {
            text-align: center;
            flex: 1;
        }
        
        .size-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--accent-blue);
        }
        
        .size-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        .savings {
            color: #4ade80;
        }
        
        .rotation-preview {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 300px;
            background: var(--secondary-dark);
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        #rotatedImage {
            max-width: 100%;
            max-height: 100%;
            transition: transform 0.5s ease;
        }
    </style>
</head>
<body>
    <button class="theme-toggle">
        <i class="fas fa-moon"></i> Dark Mode
    </button>

    <div class="container">
        <header>
            <h1>Image Rotator Pro</h1>
            <p>Rotate and flip your images with precision control</p>
        </header>
        
        <div class="main-content">
            <section class="tool-section">
                <div class="upload-container">
                    <i class="fas fa-sync-alt"></i>
                    <h2>Upload Your Image</h2>
                    <p>Supported formats: <span class="format-badge">JPG</span> <span class="format-badge">PNG</span> <span class="format-badge">WebP</span> <span class="format-badge">BMP</span></p>
                    <input type="file" id="imageUpload" accept="image/*" hidden>
                    <button class="upload-btn" id="uploadTrigger"><i class="fas fa-upload"></i> Select Image</button>
                </div>
                
                <div class="progress-container" id="progressContainer">
                    <div class="progress-bar" id="progressBar"></div>
                </div>
                
                <div class="image-container">
                    <div class="image-box">
                        <h3>Original Image</h3>
                        <div id="originalPreview"></div>
                        <div class="file-info" id="originalInfo">No image selected</div>
                    </div>
                    
                    <div class="image-box">
                        <h3>Rotated Image</h3>
                        <div class="rotation-preview">
                            <img id="rotatedImage" src="" alt="Rotated image">
                        </div>
                        <div class="file-info" id="rotatedInfo">No image available</div>
                    </div>
                </div>
                
                <div class="size-comparison">
                    <div class="size-item">
                        <div class="size-value" id="originalSize">0 KB</div>
                        <div class="size-label">Original Size</div>
                    </div>
                    <div class="size-item">
                        <div class="size-value" id="rotatedSize">0 KB</div>
                        <div class="size-label">Rotated Size</div>
                    </div>
                    <div class="size-item">
                        <div class="size-value savings" id="sizeReduction">0%</div>
                        <div class="size-label">Reduction</div>
                    </div>
                </div>
                
                <div class="controls">
                    <div class="control-group">
                        <label for="outputFormat">Output Format</label>
                        <select id="outputFormat">
                            <option value="jpeg">JPEG (.jpg)</option>
                            <option value="png">PNG (.png)</option>
                            <option value="webp">WebP (.webp)</option>
                        </select>
                    </div>
                    
                    <div class="control-group">
                        <label for="compressionLevel">Quality Level</label>
                        <div class="slider-container">
                            <input type="range" id="compressionLevel" min="0" max="100" value="85">
                            <span class="compression-value" id="compressionValue">85%</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-top: 5px;">
                            <small>Smaller Size</small>
                            <small>Better Quality</small>
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <label for="rotationAngle">Rotation Angle: <span id="angleValue">0°</span></label>
                        <div class="slider-container">
                            <input type="range" id="rotationAngle" min="0" max="360" value="0" step="1">
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <label>Rotation Presets</label>
                        <div class="rotation-buttons">
                            <button class="rotation-btn" data-angle="0"><i class="fas fa-redo"></i> 0°</button>
                            <button class="rotation-btn" data-angle="90"><i class="fas fa-redo"></i> 90°</button>
                            <button class="rotation-btn" data-angle="180"><i class="fas fa-redo"></i> 180°</button>
                            <button class="rotation-btn" data-angle="270"><i class="fas fa-redo"></i> 270°</button>
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <label>Flip Options</label>
                        <div class="flip-buttons">
                            <button class="flip-btn" data-flip="none"><i class="fas fa-times"></i> No Flip</button>
                            <button class="flip-btn" data-flip="horizontal"><i class="fas fa-arrows-alt-h"></i> Horizontal</button>
                            <button class="flip-btn" data-flip="vertical"><i class="fas fa-arrows-alt-v"></i> Vertical</button>
                            <button class="flip-btn" data-flip="both"><i class="fas fa-arrows-alt"></i> Both</button>
                        </div>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-primary" id="applyBtn" disabled><i class="fas fa-check"></i> Apply Changes</button>
                    <button class="btn btn-outline" id="downloadBtn" disabled><i class="fas fa-download"></i> Download</button>
                    <button class="btn btn-outline" id="resetBtn"><i class="fas fa-redo"></i> Reset</button>
                </div>
            </section>
            
            <section class="ad-section">
                <div class="ad-unit">
                    <!-- Google AdSense Ad Unit -->
                    <ins class="adsbygoogle"
                         style="display:block"
                         data-ad-client="ca-pub-example"
                         data-ad-slot="1234567890"
                         data-ad-format="auto"
                         data-full-width-responsive="true"></ins>
                    <script>
                         (adsbygoogle = window.adsbygoogle || []).push({});
                    </script>
                </div>
                
                <div class="ad-unit">
                    <!-- Google AdSense Ad Unit -->
                    <ins class="adsbygoogle"
                         style="display:block"
                         data-ad-client="ca-pub-example"
                         data-ad-slot="0987654321"
                         data-ad-format="auto"
                         data-full-width-responsive="true"></ins>
                    <script>
                         (adsbygoogle = window.adsbygoogle || []).push({});
                    </script>
                </div>
            </section>
        </div>
        
        <section class="seo-content">
            <h2>Why Rotate and Flip Images?</h2>
            <p>Image rotation and flipping are essential editing techniques that help correct orientation issues, create mirror effects, or prepare images for different layouts. Whether you're fixing photos taken in the wrong orientation, creating artistic effects, or preparing images for design projects, rotation and flipping tools are fundamental to image editing.</p>
            
            <p>Our image rotator tool provides precise control over rotation angles and flip options, along with quality settings to optimize your images. The tool works entirely in your browser, ensuring your images remain private and secure.</p>
            
            <p>Common use cases for image rotation and flipping include:</p>
            <ul style="color: var(--text-secondary); margin-left: 20px; margin-bottom: 15px;">
                <li>Correcting photos taken with the wrong orientation</li>
                <li>Creating mirror images for artistic effects</li>
                <li>Preparing images for social media with different orientations</li>
                <li>Fixing scanned documents that were rotated incorrectly</li>
                <li>Creating symmetrical designs</li>
            </ul>
            
            <p>With our tool, you can precisely control rotation angles, apply flip transformations, and adjust quality settings to find the perfect balance between size and visual fidelity.</p>
        </section>
        
        <footer>
            <p>&copy; 2023 Image Rotator Pro | All Rights Reserved</p>
            <p>This tool processes your images entirely in your browser - no uploads to servers required!</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Elements
            const uploadTrigger = document.getElementById('uploadTrigger');
            const imageUpload = document.getElementById('imageUpload');
            const outputFormat = document.getElementById('outputFormat');
            const compressionLevel = document.getElementById('compressionLevel');
            const compressionValue = document.getElementById('compressionValue');
            const rotationAngle = document.getElementById('rotationAngle');
            const angleValue = document.getElementById('angleValue');
            const rotationButtons = document.querySelectorAll('.rotation-btn');
            const flipButtons = document.querySelectorAll('.flip-btn');
            const applyBtn = document.getElementById('applyBtn');
            const downloadBtn = document.getElementById('downloadBtn');
            const resetBtn = document.getElementById('resetBtn');
            const progressContainer = document.getElementById('progressContainer');
            const progressBar = document.getElementById('progressBar');
            const originalPreview = document.getElementById('originalPreview');
            const rotatedImage = document.getElementById('rotatedImage');
            const originalInfo = document.getElementById('originalInfo');
            const rotatedInfo = document.getElementById('rotatedInfo');
            const originalSize = document.getElementById('originalSize');
            const rotatedSize = document.getElementById('rotatedSize');
            const sizeReduction = document.getElementById('sizeReduction');
            
            let originalImage = null;
            let rotatedImageBlob = null;
            let currentAngle = 0;
            let currentFlip = 'none';
            
            // Event listeners
            uploadTrigger.addEventListener('click', () => imageUpload.click());
            
            imageUpload.addEventListener('change', function(e) {
                if (this.files && this.files[0]) {
                    const file = this.files[0];
                    
                    // Check if file is an image
                    if (!file.type.match('image.*')) {
                        alert('Please select a valid image file.');
                        return;
                    }
                    
                    // Check file size (max 20MB)
                    if (file.size > 20 * 1024 * 1024) {
                        alert('File size exceeds the maximum limit of 20MB.');
                        return;
                    }
                    
                    // Display original image
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        originalImage = new Image();
                        originalImage.onload = function() {
                            // Clear previous previews
                            originalPreview.innerHTML = '';
                            
                            // Create and append image element
                            const imgElement = document.createElement('img');
                            imgElement.src = event.target.result;
                            imgElement.classList.add('preview-img');
                            originalPreview.appendChild(imgElement);
                            
                            // Set rotated image
                            rotatedImage.src = event.target.result;
                            
                            // Update file info
                            const fileSize = (file.size / 1024).toFixed(2);
                            originalInfo.textContent = `Size: ${fileSize} KB | Dimensions: ${originalImage.width}×${originalImage.height}px`;
                            originalSize.textContent = `${fileSize} KB`;
                            
                            // Enable apply button
                            applyBtn.disabled = false;
                            
                            // Reset rotated file info
                            rotatedInfo.textContent = 'Apply rotation/flip to see result';
                            rotatedSize.textContent = '0 KB';
                            sizeReduction.textContent = '0%';
                            downloadBtn.disabled = true;
                        };
                        originalImage.src = event.target.result;
                    };
                    reader.readAsDataURL(file);
                }
            });
            
            compressionLevel.addEventListener('input', function() {
                compressionValue.textContent = `${this.value}%`;
            });
            
            rotationAngle.addEventListener('input', function() {
                angleValue.textContent = `${this.value}°`;
                currentAngle = parseInt(this.value);
                updateRotatedImage();
            });
            
            // Rotation button handlers
            rotationButtons.forEach(button => {
                button.addEventListener('click', function() {
                    rotationButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    
                    const angle = parseInt(this.dataset.angle);
                    rotationAngle.value = angle;
                    angleValue.textContent = `${angle}°`;
                    currentAngle = angle;
                    updateRotatedImage();
                });
            });
            
            // Flip button handlers
            flipButtons.forEach(button => {
                button.addEventListener('click', function() {
                    flipButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    
                    currentFlip = this.dataset.flip;
                    updateRotatedImage();
                });
            });
            
            applyBtn.addEventListener('click', function() {
                if (!originalImage) return;
                
                // Show loading state
                applyBtn.disabled = true;
                applyBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
                progressContainer.style.display = 'block';
                
                // Simulate processing with progress
                let progress = 0;
                const interval = setInterval(() => {
                    progress += 5;
                    progressBar.style.width = `${progress}%`;
                    
                    if (progress >= 100) {
                        clearInterval(interval);
                        finishProcessing();
                    }
                }, 100);
            });
            
            downloadBtn.addEventListener('click', function() {
                if (!rotatedImageBlob) return;
                
                const format = outputFormat.value;
                const downloadLink = document.createElement('a');
                downloadLink.href = URL.createObjectURL(rotatedImageBlob);
                downloadLink.download = `rotated-image.${format}`;
                document.body.appendChild(downloadLink);
                downloadLink.click();
                document.body.removeChild(downloadLink);
            });
            
            resetBtn.addEventListener('click', function() {
                // Reset everything
                originalImage = null;
                rotatedImageBlob = null;
                imageUpload.value = '';
                compressionLevel.value = 85;
                compressionValue.textContent = '85%';
                rotationAngle.value = 0;
                angleValue.textContent = '0°';
                currentAngle = 0;
                currentFlip = 'none';
                applyBtn.disabled = true;
                applyBtn.innerHTML = '<i class="fas fa-check"></i> Apply Changes';
                downloadBtn.disabled = true;
                progressContainer.style.display = 'none';
                progressBar.style.width = '0%';
                
                // Reset rotation and flip buttons
                rotationButtons.forEach(btn => btn.classList.remove('active'));
                rotationButtons[0].classList.add('active');
                flipButtons.forEach(btn => btn.classList.remove('active'));
                flipButtons[0].classList.add('active');
                
                // Reset file info
                originalPreview.innerHTML = '';
                rotatedImage.src = '';
                originalInfo.textContent = 'No image selected';
                rotatedInfo.textContent = 'No image available';
                originalSize.textContent = '0 KB';
                rotatedSize.textContent = '0 KB';
                sizeReduction.textContent = '0%';
            });
            
            function updateRotatedImage() {
                if (!originalImage) return;
                
                // Apply rotation and flip transformations
                let transform = `rotate(${currentAngle}deg)`;
                
                if (currentFlip === 'horizontal') {
                    transform += ' scaleX(-1)';
                } else if (currentFlip === 'vertical') {
                    transform += ' scaleY(-1)';
                } else if (currentFlip === 'both') {
                    transform += ' scale(-1, -1)';
                }
                
                rotatedImage.style.transform = transform;
            }
            
            function finishProcessing() {
                if (!originalImage) return;
                
                // Create canvas for processing
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                
                // Calculate new dimensions after rotation
                const rad = currentAngle * Math.PI / 180;
                const sin = Math.abs(Math.sin(rad));
                const cos = Math.abs(Math.cos(rad));
                
                let newWidth = originalImage.width * cos + originalImage.height * sin;
                let newHeight = originalImage.width * sin + originalImage.height * cos;
                
                // Set canvas dimensions
                canvas.width = newWidth;
                canvas.height = newHeight;
                
                // Translate to center and rotate
                ctx.translate(canvas.width / 2, canvas.height / 2);
                ctx.rotate(rad);
                
                // Apply flip transformations
                if (currentFlip === 'horizontal') {
                    ctx.scale(-1, 1);
                } else if (currentFlip === 'vertical') {
                    ctx.scale(1, -1);
                } else if (currentFlip === 'both') {
                    ctx.scale(-1, -1);
                }
                
                // Draw image
                ctx.drawImage(
                    originalImage,
                    -originalImage.width / 2,
                    -originalImage.height / 2,
                    originalImage.width,
                    originalImage.height
                );
                
                // Get quality level
                const quality = compressionLevel.value / 100;
                const format = outputFormat.value;
                
                // Convert canvas to blob with selected format and quality
                canvas.toBlob(function(blob) {
                    // Create and display rotated image
                    const rotatedUrl = URL.createObjectURL(blob);
                    rotatedImageBlob = blob;
                    
                    // Update file info
                    const fileSize = (blob.size / 1024).toFixed(2);
                    rotatedInfo.textContent = `Size: ${fileSize} KB | Dimensions: ${Math.round(newWidth)}×${Math.round(newHeight)}px`;
                    rotatedSize.textContent = `${fileSize} KB`;
                    
                    // Calculate savings
                    const originalFileSize = originalImage.src.length * 0.75; // Approximate original size in bytes
                    const reduction = (100 - (blob.size / originalFileSize) * 100).toFixed(1);
                    sizeReduction.textContent = `${reduction}%`;
                    
                    // Enable download button
                    downloadBtn.disabled = false;
                    
                    // Reset apply button
                    applyBtn.disabled = false;
                    applyBtn.innerHTML = '<i class="fas fa-check"></i> Apply Changes';
                    progressContainer.style.display = 'none';
                }, `image/${outputFormat.value}`, quality);
            }
            
            // Theme toggle functionality
            const themeToggle = document.querySelector('.theme-toggle');
            themeToggle.addEventListener('click', function() {
                const icon = this.querySelector('i');
                if (icon.classList.contains('fa-moon')) {
                    icon.classList.remove('fa-moon');
                    icon.classList.add('fa-sun');
                    this.innerHTML = '<i class="fas fa-sun"></i> Light Mode';
                    document.body.style.filter = 'invert(1) hue-rotate(180deg)';
                } else {
                    icon.classList.remove('fa-sun');
                    icon.classList.add('fa-moon');
                    this.innerHTML = '<i class="fas fa-moon"></i> Dark Mode';
                    document.body.style.filter = 'none';
                }
            });
        });
    </script>
</body>
</html>
